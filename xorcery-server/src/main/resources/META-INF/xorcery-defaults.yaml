---
id: "{{ ENV.SERVER_ID | host}}"
name: genericserver
host: localhost
environment: development
tag: default

home: "{{ ENV.XORCERY_HOME | SYSTEM.user_dir }}"
build_resources: "{{ home }}/target/classes"
resources: "{{ ENV.RESOURCES | build_resources }}"

idle_timeout: -1

server:
  scheme: "{{ server.ssl.enabled ? \"https\" | \"http\" }}"
  port: "{{ server.ssl.enabled ? server.ssl.port | server.http.port }}"
  uri: "{{server.scheme}}://{{host}}:{{server.port}}/"

  idle_timeout: "{{ idle_timeout }}"

  http:
    port: 80

  http2:
    enabled: true

  http3:
    enabled: false
    port: "{{ server.ssl.port }}"

  ssl:
    enabled: true
    port: 443
    trustall: true
    wantclientauth: true
    snirequired: false
    snihostcheck: false
    keystore:
      type: "PKCS12"
      path: "{{ resources }}/keystore.p12"
      password: "password"
    truststore:
      type: "PKCS12"
      path: "{{ resources }}/truststore.jks"
      password: "password"

client:
  http2:
    enabled: true

  http3:
    enabled: true

  ssl:
    enabled: true
    trustall: true
    keystore:
      type: "PKCS12"
      path: "{{ resources }}/keystore.p12"
      password: "password"
    truststore:
      type: "PKCS12"
      path: "{{ resources }}/truststore.jks"
      password: "password"

jaxrs:
  packages:
    - com.exoreaction.xorcery.server.resources
    - com.exoreaction.xorcery.service

#    - /conductor/metrics.yaml
#    - /conductor/metrics_opensearch.yaml
#    - /conductor/logging_opensearch.yaml
#    - /conductor/requestlog_opensearch.yaml
#    - /conductor/certmanager.yaml
